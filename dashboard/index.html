<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Classroom Listener — Professor Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0a0a0a; --card: #111; --border: #1a1a1a; --border2: #222;
  --text: #e6e6e6; --muted: #555; --gold: #d4a843;
  --silent: #1a1a1a; --shadow: 0 10px 40px rgba(0,0,0,0.4);
}
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: radial-gradient(1200px 600px at 70% -10%, rgba(212,168,67,0.06), transparent 60%),
              radial-gradient(900px 600px at 10% 10%, rgba(255,255,255,0.03), transparent 60%),
              var(--bg);
  color: var(--text); font-family: 'DM Sans', sans-serif;
  min-height: 100vh; overflow-x: hidden;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Header */
.dash-header {
  position: sticky; top: 0; z-index: 50;
  background: rgba(10,10,10,0.95); backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  padding: 16px 32px; display: flex; align-items: center; gap: 24px;
  flex-wrap: wrap;
}
.logo {
  font-family: 'JetBrains Mono', monospace; font-size: 11px; font-weight: 500;
  letter-spacing: 0.15em; text-transform: uppercase; color: #d4a843; white-space: nowrap;
}
.logo .sub { color: #555; font-weight: 300; margin-left: 6px; }
.section-pills { display: flex; gap: 4px; margin-left: 16px; }
.section-pill {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 0.08em;
  padding: 4px 10px; border-radius: 999px; background: #111; border: 1px solid #1a1a1a;
  color: #333; cursor: default; text-transform: uppercase;
}
.section-pill.active { color: #d4a843; border-color: #d4a843; background: rgba(212,168,67,0.08); cursor: pointer; }
.tab-nav { display: flex; gap: 2px; margin-left: auto; }
.tab-btn {
  font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 0.08em;
  text-transform: uppercase; padding: 6px 16px; border-radius: 4px;
  background: none; border: 1px solid transparent; color: #555; cursor: pointer;
  transition: all 0.2s;
}
.tab-btn:hover { color: #888; }
.tab-btn.active { color: #d4a843; border-color: #222; background: #111; }

/* Course selector */
.course-bar {
  display: flex; gap: 6px; padding: 10px 32px;
  border-bottom: 1px solid var(--border);
  background: rgba(10,10,10,0.85); backdrop-filter: blur(8px);
  overflow-x: auto; flex-wrap: wrap;
}
.course-pill {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 0.06em;
  text-transform: uppercase; padding: 5px 14px; border-radius: 999px;
  background: var(--card); border: 1px solid var(--border);
  color: #333; cursor: default; white-space: nowrap; transition: all 0.2s;
}
.course-pill.active {
  color: var(--gold); border-color: var(--gold);
  background: rgba(212,168,67,0.08); cursor: pointer;
}

/* Tab content */
.tab-content { display: none; padding: 24px 32px 48px; }
.tab-content.active { display: block; animation: fadeIn 200ms ease; }

/* Session picker */
.session-picker { display: flex; gap: 6px; margin-bottom: 24px; flex-wrap: wrap; }
.session-pill {
  font-family: 'JetBrains Mono', monospace; font-size: 10px; letter-spacing: 0.04em;
  padding: 8px 16px; border-radius: 999px; background: #111; border: 1px solid #1a1a1a;
  color: #555; cursor: pointer; transition: all 0.2s;
}
.session-pill:hover { color: #888; border-color: #333; }
.session-pill.active { color: #d4a843; border-color: #d4a843; background: rgba(212,168,67,0.06); }

/* Session header */
.session-header { margin-bottom: 24px; }
.session-title {
  font-size: 22px; font-weight: 300; color: #e8e8e8; margin-bottom: 8px;
}
.session-title .num { color: #d4a843; font-weight: 500; }
.session-meta {
  display: flex; gap: 16px; font-family: 'JetBrains Mono', monospace;
  font-size: 10px; color: #555; letter-spacing: 0.04em;
}
.session-meta .hl { color: #d4a843; }

/* Session summary */
.session-summary {
  background: #111; border: 1px solid #1a1a1a; border-radius: 6px;
  padding: 20px 24px; margin-bottom: 24px; font-size: 14px; color: #999;
  line-height: 1.7; font-weight: 300;
}
.session-summary .case-tag {
  display: inline-block; font-family: 'JetBrains Mono', monospace;
  font-size: 9px; letter-spacing: 0.06em; text-transform: uppercase;
  color: #d4a843; background: rgba(212,168,67,0.08); border: 1px solid rgba(212,168,67,0.15);
  padding: 2px 8px; border-radius: 3px; margin-right: 8px; vertical-align: middle;
}

/* Heatmap */
.heatmap-section { margin-bottom: 32px; }
.heatmap-label {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; color: #444;
  letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 12px;
}
.heatmap { display: flex; flex-direction: column; gap: 4px; align-items: center; }
.heatmap-row { display: flex; gap: 3px; justify-content: center; }
.heatmap-seat {
  width: 44px; height: 32px; border-radius: 3px; background: #141414;
  border: 1px solid #1a1a1a; display: flex; align-items: center; justify-content: center;
  font-family: 'JetBrains Mono', monospace; font-size: 8px; color: #333;
  cursor: pointer; transition: all 0.2s; position: relative;
}
.heatmap-seat:hover { border-color: #444; z-index: 2; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.4); }
.heatmap-seat.gold { background: rgba(212,168,67,0.25); border-color: rgba(212,168,67,0.4); color: #d4a843; }
.heatmap-seat.warm { background: rgba(212,168,67,0.12); border-color: rgba(212,168,67,0.2); color: #886a2a; }
.heatmap-seat.dim { background: rgba(212,168,67,0.05); border-color: rgba(212,168,67,0.1); color: #554420; }
.heatmap-seat.silent { background: #111; border-color: #1a1a1a; color: #2a2a2a; }
.heatmap-tooltip {
  position: absolute; bottom: calc(100% + 6px); left: 50%; transform: translateX(-50%);
  background: #1a1a1a; border: 1px solid #333; border-radius: 4px; padding: 6px 10px;
  font-size: 10px; color: #ccc; white-space: nowrap; pointer-events: none;
  opacity: 0; transition: opacity 0.15s; z-index: 10;
}
.heatmap-seat:hover .heatmap-tooltip { opacity: 1; }
.heatmap-row-label {
  font-family: 'JetBrains Mono', monospace; font-size: 8px; color: #333;
  width: 50px; text-align: right; margin-right: 6px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: flex-end;
}

/* Leaderboard */
.leaderboard { margin-bottom: 32px; }
.lb-title {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; color: #444;
  letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 12px;
}
.lb-row {
  display: flex; align-items: center; height: 36px; cursor: pointer;
  transition: background 0.15s; padding: 0 8px; border-radius: 4px;
}
.lb-row:hover { background: rgba(212,168,67,0.04); }
.lb-rank {
  width: 28px; font-family: 'JetBrains Mono', monospace; font-size: 11px;
  color: #555; text-align: right; margin-right: 12px; flex-shrink: 0;
}
.lb-rank.top { color: #d4a843; }
.lb-name {
  width: 180px; font-size: 13px; color: #999; white-space: nowrap;
  overflow: hidden; text-overflow: ellipsis; flex-shrink: 0; margin-right: 12px;
}
.lb-row:hover .lb-name { color: #d4a843; }
.lb-bar-wrap { flex: 1; height: 18px; position: relative; background: rgba(60,60,65,0.3); border-radius: 3px; margin-right: 12px; }
.lb-bar-total {
  position: absolute; top: 0; left: 0; height: 100%;
  background: rgba(212,168,67,0.15); border-radius: 3px;
  transition: width 0.4s ease;
}
.lb-bar-quality {
  position: absolute; top: 0; left: 0; height: 100%;
  background: #d4a843; border-radius: 3px;
  transition: width 0.4s ease;
}
.lb-ratio {
  font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #555;
  width: 40px; text-align: center; flex-shrink: 0; margin-right: 8px;
}
.lb-ratio .hi { color: #d4a843; }
.lb-gpa {
  font-family: 'JetBrains Mono', monospace; font-size: 11px; color: #666;
  width: 36px; text-align: right; flex-shrink: 0;
}
.lb-gpa.gold { color: #d4a843; }

/* Key moments */
.moments-section { margin-bottom: 32px; }
.moment-card {
  background: #111; border: 1px solid #1a1a1a; border-radius: 6px;
  padding: 20px 24px; margin-bottom: 12px;
}
.moment-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.moment-photo {
  width: 36px; height: 36px; border-radius: 50%; object-fit: cover;
  border: 1px solid #222;
}
.moment-name { font-size: 14px; font-weight: 500; color: #ccc; }
.moment-tag {
  font-family: 'JetBrains Mono', monospace; font-size: 8px; letter-spacing: 0.06em;
  text-transform: uppercase; color: #d4a843; background: rgba(212,168,67,0.08);
  border: 1px solid rgba(212,168,67,0.15); padding: 2px 8px; border-radius: 3px;
  margin-left: auto;
}
.moment-quote {
  font-size: 13px; color: #888; line-height: 1.6; font-style: italic;
  padding-left: 12px; border-left: 2px solid #2a2a2a; margin-bottom: 8px;
}
.moment-response { font-size: 12px; color: #555; }
.moment-response .prof { color: #888; }

/* Section overview table */
.overview-controls {
  display: flex; gap: 8px; margin-bottom: 16px; align-items: center;
}
.sort-btn {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 0.06em;
  text-transform: uppercase; padding: 5px 12px; border-radius: 999px;
  background: #111; border: 1px solid #1a1a1a; color: #555; cursor: pointer;
  transition: all 0.2s;
}
.sort-btn:hover { color: #888; border-color: #333; }
.sort-btn.active { color: #d4a843; border-color: #d4a843; }
.alert-banner {
  background: rgba(212,168,67,0.06); border: 1px solid rgba(212,168,67,0.15);
  border-radius: 4px; padding: 10px 16px; margin-bottom: 16px;
  font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #886a2a;
  letter-spacing: 0.03em;
}
.overview-table { width: 100%; }
.ov-row {
  display: flex; align-items: center; padding: 8px; border-radius: 4px;
  cursor: pointer; transition: background 0.15s;
}
.ov-row:hover { background: rgba(212,168,67,0.04); }
.ov-row.header {
  cursor: default; border-bottom: 1px solid #1a1a1a; margin-bottom: 4px;
}
.ov-row.header:hover { background: none; }
.ov-col {
  font-family: 'JetBrains Mono', monospace; font-size: 11px; color: #777;
}
.ov-col.rank { width: 40px; text-align: right; margin-right: 12px; }
.ov-col.rank.top { color: #d4a843; }
.ov-col.name { width: 200px; font-family: 'DM Sans', sans-serif; font-size: 13px; color: #999; margin-right: 12px; }
.ov-row:hover .ov-col.name { color: #d4a843; }
.ov-col.row-num { width: 50px; color: #444; text-align: center; }
.ov-col.gpa { width: 50px; text-align: right; margin-right: 16px; }
.ov-col.gpa.gold { color: #d4a843; }
.ov-col.total { width: 50px; text-align: right; }
.ov-col.quality { width: 50px; text-align: right; color: #d4a843; }
.ov-col.trend { width: 30px; text-align: center; }
.ov-col.header-label { color: #444; font-size: 9px; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; }
.ov-col.header-label:hover { color: #666; }

/* Trends */
.chart-container { background: #111; border: 1px solid #1a1a1a; border-radius: 6px; padding: 24px; margin-bottom: 24px; }
.chart-title {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; color: #444;
  letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 16px;
}
.chart-area { position: relative; height: 200px; }
.chart-area canvas { width: 100%; height: 100%; }

/* Profile card modal */
#card-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 100;
  opacity: 0; pointer-events: none; transition: opacity 0.3s;
  display: flex; align-items: center; justify-content: center;
}
#card-overlay.visible { opacity: 1; pointer-events: auto; }
#profile-card {
  width: 520px; max-width: 92vw; max-height: 90vh; overflow-y: auto;
  background: #111; border: 1px solid #222; border-radius: 8px;
  padding: 32px 36px; transform: translateY(12px); transition: transform 0.3s;
  position: relative;
}
#card-overlay.visible #profile-card { transform: translateY(0); }
#card-close {
  position: absolute; top: 16px; right: 20px;
  font-family: 'JetBrains Mono', monospace; font-size: 14px; color: #444;
  background: none; border: none; cursor: pointer; transition: color 0.2s; padding: 4px;
}
#card-close:hover { color: #888; }
.card-photo-wrap { display: flex; gap: 20px; margin-bottom: 16px; }
.card-photo {
  width: 72px; height: 72px; border-radius: 50%; object-fit: cover;
  border: 2px solid #222; flex-shrink: 0;
}
.card-header-text { flex: 1; min-width: 0; }
.card-rank {
  font-family: 'JetBrains Mono', monospace; font-size: 10px; color: #555;
  letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 4px;
}
.card-rank .rn { color: #d4a843; }
.card-name { font-size: 20px; font-weight: 600; color: #e8e8e8; margin-bottom: 2px; }
.card-bg { font-family: 'JetBrains Mono', monospace; font-size: 11px; color: #666; }
.card-headline {
  font-size: 15px; color: #d4a843; margin-bottom: 16px; font-style: italic;
}
.card-quote {
  font-size: 13px; color: #888; line-height: 1.6; margin-bottom: 16px;
  padding-left: 12px; border-left: 2px solid #2a2a2a; font-style: italic;
}
.card-assessment { font-size: 13px; color: #aaa; line-height: 1.6; margin-bottom: 20px; }
.card-dims { margin-bottom: 20px; }
.card-dims-title {
  font-family: 'JetBrains Mono', monospace; font-size: 8px; color: #555;
  letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 10px;
}
.dim-row { display: flex; align-items: center; margin-bottom: 6px; }
.dim-label {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; color: #777;
  letter-spacing: 0.04em; width: 80px; flex-shrink: 0;
}
.dim-dots { display: flex; gap: 4px; flex: 1; }
.dim-dot {
  width: 8px; height: 8px; border-radius: 50%; background: #1a1a1a; border: 1px solid #2a2a2a;
}
.dim-dot.f { background: #d4a843; border-color: #d4a843; }
.dim-dot.m { background: rgba(212,168,67,0.6); border-color: rgba(212,168,67,0.6); }
.dim-dot.l { background: rgba(212,168,67,0.3); border-color: rgba(212,168,67,0.4); }
.card-traits { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; }
.card-trait {
  font-family: 'JetBrains Mono', monospace; font-size: 9px; letter-spacing: 0.06em;
  text-transform: uppercase; color: #888; background: rgba(212,168,67,0.08);
  border: 1px solid rgba(212,168,67,0.15); padding: 3px 10px; border-radius: 999px;
}
.card-sparkline { margin-bottom: 20px; }
.card-sparkline-title {
  font-family: 'JetBrains Mono', monospace; font-size: 8px; color: #555;
  letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 8px;
}
.sparkline-bars { display: flex; gap: 4px; align-items: flex-end; height: 40px; }
.spark-bar {
  flex: 1; background: rgba(212,168,67,0.3); border-radius: 2px 2px 0 0;
  min-height: 2px; position: relative;
}
.spark-bar .spark-label {
  position: absolute; bottom: -14px; left: 50%; transform: translateX(-50%);
  font-family: 'JetBrains Mono', monospace; font-size: 7px; color: #444;
}
.card-stats {
  display: flex; gap: 24px; padding-top: 16px; border-top: 1px solid #1a1a1a;
}
.card-stat { text-align: center; }
.card-stat-val {
  font-family: 'JetBrains Mono', monospace; font-size: 18px; font-weight: 500; color: #d4a843;
}
.card-stat-label {
  font-family: 'JetBrains Mono', monospace; font-size: 8px; color: #555;
  letter-spacing: 0.08em; text-transform: uppercase; margin-top: 2px;
}

/* Responsive */
@media (max-width: 1100px) {
  .dash-header { padding: 12px 16px; gap: 12px; }
  .course-bar { padding: 8px 16px; }
  .tab-content { padding: 16px; }
  .lb-name { width: 140px; }
  .ov-col.name { width: 150px; }
  .heatmap-seat { width: 36px; height: 28px; font-size: 7px; }
}
@media (max-width: 720px) {
  .dash-header { flex-direction: column; align-items: flex-start; gap: 8px; }
  .section-pills { margin-left: 0; }
  .tab-nav { margin-left: 0; width: 100%; }
  .tab-btn { flex: 1; text-align: center; }
  .course-bar { padding: 8px 12px; gap: 4px; }
  .course-pill { font-size: 8px; padding: 4px 10px; }
  .tab-content { padding: 12px; }
  .session-title { font-size: 18px; }
  .session-meta { flex-wrap: wrap; }
  .heatmap-seat { width: 28px; height: 24px; font-size: 6px; }
  .heatmap-row { gap: 2px; }
  .heatmap-row-label { width: 30px; font-size: 7px; }
  .lb-name { width: 100px; font-size: 12px; }
  .ov-col.name { width: 120px; }
  #profile-card { padding: 20px; }
  .card-photo { width: 56px; height: 56px; }
  .card-name { font-size: 17px; }
  .card-stats { flex-wrap: wrap; gap: 16px; }
}
</style>
</head>
<body>

<!-- Header -->
<div class="dash-header">
  <div class="logo">Classroom Listener <span class="sub">Professor Dashboard</span></div>
  <div class="section-pills">
    <div class="section-pill">A</div>
    <div class="section-pill">B</div>
    <div class="section-pill">C</div>
    <div class="section-pill active">D</div>
    <div class="section-pill">E</div>
  </div>
  <div class="tab-nav">
    <button class="tab-btn active" data-tab="sessions">Sessions</button>
    <button class="tab-btn" data-tab="section">Section</button>
    <button class="tab-btn" data-tab="trends">Trends</button>
  </div>
</div>

<!-- Course selector -->
<div class="course-bar">
  <div class="course-pill">Financial Accounting</div>
  <div class="course-pill">Financial Markets &amp; Valuation</div>
  <div class="course-pill">Intro to Strategy</div>
  <div class="course-pill active">Organisational Behaviour</div>
  <div class="course-pill">Prices &amp; Markets</div>
  <div class="course-pill">Uncertainty, Data &amp; Judgment</div>
</div>

<!-- Tab 1: Sessions -->
<div class="tab-content active" id="tab-sessions">
  <div class="session-picker" id="session-picker"></div>
  <div class="session-header" id="session-header"></div>
  <div class="session-summary" id="session-summary"></div>
  <div class="heatmap-section">
    <div class="heatmap-label">Seating Plan — Participation Heatmap</div>
    <div class="heatmap" id="heatmap"></div>
  </div>
  <div class="leaderboard" id="session-leaderboard">
    <div class="lb-title">Session Leaderboard — <span style="color:#d4a843">validated</span> / total contributions</div>
    <div id="lb-rows"></div>
  </div>
  <div class="moments-section">
    <div class="lb-title">Key Moments</div>
    <div id="moments"></div>
  </div>
</div>

<!-- Tab 2: Section -->
<div class="tab-content" id="tab-section">
  <div class="overview-controls" id="overview-controls"></div>
  <div class="alert-banner" id="alert-banner"></div>
  <div class="overview-table" id="overview-table"></div>
</div>

<!-- Tab 3: Trends -->
<div class="tab-content" id="tab-trends">
  <div class="chart-container">
    <div class="chart-title">Contributions per Session</div>
    <div class="chart-area"><canvas id="chart-contribs"></canvas></div>
  </div>
  <div class="chart-container">
    <div class="chart-title">Unique Speakers per Session</div>
    <div class="chart-area"><canvas id="chart-speakers"></canvas></div>
  </div>
  <div class="chart-container">
    <div class="chart-title">Top 5 — Cumulative Contributions</div>
    <div class="chart-area"><canvas id="chart-top5"></canvas></div>
  </div>
</div>

<!-- Profile Card Modal -->
<div id="card-overlay">
  <div id="profile-card">
    <button id="card-close">&times;</button>
    <div id="card-body"></div>
  </div>
</div>

<script>
// ============================================================
// DATA
// ============================================================

const SESSIONS = [
  { num:'1 & 2', title:'Negotiation', date:'12 Jan 2026', case:'Red Banana',
    themes:['BATNA','Emotional tactics','Interest-based negotiation'],
    summary:'Red Banana simulation opened with explosive emotional tactics, then pivoted to interest-based negotiation. Chris Johnson connected rule-following to Kantian ethics — professor responded "Very good" and built the ethics discussion around it. Freddie Chambers applied negotiation strategy to real commercial scenarios. Section D split sharply between competitive and collaborative approaches, surfacing the core tension between claiming and creating value.',
    moments:[
      { student:'Chris Johnson', quote:'"If you\'re asking others to follow rules, you should demonstrate the same behaviour."', response:'Professor: "Very good." Built the ethics discussion around this.', tag:'Kantian ethics connection' },
      { student:'Freddie Chambers', quote:'Contribution on negotiation strategy applied to commercial scenarios.', response:'Professor: "What you said, Freddie, makes full sense."', tag:'Professor validated' }
    ]
  },
  { num:'3 & 4', title:'Group Decision-Making', date:'15 Jan 2026', case:'12 Angry Men',
    themes:['Hidden profiles','Minority influence','Process design'],
    summary:'12 Angry Men case revealed how groups suppress minority viewpoints and fail to surface hidden information. Nick Colbourne asked whether all novel problems require building knowledge over time — professor called it "a good way to think about it." Francesco Danovi suggested voting before discussion, prompting ethical analysis of how process design shapes outcomes. Raphael Barata gave the only mathematically correct birthday probability calculation.',
    moments:[
      { student:'Nick Colbourne', quote:'"Isn\'t it kind of like every time something is so new, we have to collect data over time?"', response:'Professor: "A good way to think about it."', tag:'Philosophical insight' },
      { student:'Francesco Danovi', quote:'Suggested voting before discussion to avoid anchoring bias.', response:'Professor noted the ethical implications of process design.', tag:'Tactically interesting' }
    ]
  },
  { num:'5 & 6', title:'Leading Diverse Teams', date:'22 Jan 2026', case:'Apollo 13',
    themes:['Superordinate goals','Crisis leadership','Remote teams'],
    summary:'Apollo 13 crisis case examined through the lens of superordinate goals and team cohesion under pressure. Marwan Sinaceur challenged Section D to identify when Kranz\'s leadership shifts from directive to empowering. Nick Colbourne argued Kranz was "giving them work to distract them" — professor built the next segment around this. Voice transmission research (70% of emotional cues via voice alone) connected to remote team dynamics.',
    moments:[
      { student:'Nick Colbourne', quote:'"He\'s giving them work to distract them from the fact they might die."', response:'Professor built the next segment of the lecture around this insight.', tag:'Professor built on this' },
      { student:'Chris Johnson', quote:'Connected team contract principles to crisis leadership decision-making.', response:'Professor used this as a bridge to the remote teams section.', tag:'Framework application' }
    ]
  },
  { num:'7 & 8', title:'Power & Politics', date:'29 Jan 2026', case:'Axelrod',
    themes:['Tit-for-tat','Coalition building','Toxic leadership'],
    summary:'Axelrod\'s tournament introduced game theory to organisational politics. Guillermo Krauch applied economic reasoning to coalition dynamics — one of the sharpest analytical moves of the term. The session explored how cooperation emerges in repeated interactions and why "nice" strategies outperform aggressive ones. Discussion turned to toxic leadership and how power corrupts decision-making processes.',
    moments:[
      { student:'Guillermo Krauch', quote:'"The dominant strategy shifts when you move from single-round to iterated games — that\'s where coalition value emerges."', response:'Professor: "Exactly the economic lens we need here."', tag:'Economics-grounded' }
    ]
  },
  { num:'9 & 10', title:'Motivation', date:'5 Feb 2026', case:'Semler/Jobs',
    themes:['Four Drives model','Intrinsic vs extrinsic','Self-determination'],
    summary:'Semler\'s radical autonomy at Semco contrasted with Jobs\' obsessive control at Apple — both producing extraordinary results through opposite approaches to motivation. Eva Sinha reframed IKEA\'s challenge as fighting individualism itself — professor said it was "even more poetic than what I was looking for." Chris Johnson connected the Four Drives model to Bain\'s talent retention strategy, grounding theory in practice.',
    moments:[
      { student:'Eva Sinha', quote:'"IKEA\'s enemy is individualism."', response:'Professor: "Even more poetic than what I was looking for."', tag:'Creative reframe' },
      { student:'Chris Johnson', quote:'Connected the Four Drives model directly to Bain\'s talent retention challenges.', response:'Professor used this as the practical application example.', tag:'Professional insight' }
    ]
  },
  { num:'11 & 12', title:'Feedback', date:'12 Feb 2026', case:'Set-Up-to-Fail',
    themes:['Self-fulfilling prophecy','Growth mindset','Diversity-aware feedback'],
    summary:'Set-Up-to-Fail syndrome showed how managers inadvertently create the poor performance they expect. Nick Colbourne\'s role-play became the teaching moment — demonstrating the "illusion of transparency" where we assume others understand our intentions. Jessica Dill advocated for data-driven, process-oriented feedback systems. The session connected feedback quality to diversity and inclusion outcomes.',
    moments:[
      { student:'Nick Colbourne', quote:'Role-play demonstrated the gap between intended and received feedback.', response:'Became the session\'s core teaching moment on "illusion of transparency."', tag:'Became the case study' },
      { student:'Jessica Dill', quote:'"Focus on the data, have a process."', response:'Professor: "That\'s exactly the systematic approach we need."', tag:'Process-oriented' }
    ]
  },
  { num:'13 & 14', title:'Leadership', date:'14 Feb 2026', case:'Hogan & Kaiser',
    themes:['Dark side of personality','50% manager failure rate','Authentic leadership'],
    summary:'Hogan & Kaiser\'s research revealed that 50% of managers fail — not from incompetence but from personality derailers that emerge under stress. Chris Johnson\'s final contribution cemented his position as the section\'s most consistent high-quality voice. Eliel Rosenkranz offered a grounded market reality check: "The market is not ready to pay for it." The session closed the OB arc by connecting self-awareness to sustained leadership effectiveness.',
    moments:[
      { student:'Chris Johnson', quote:'Final contribution connecting personality research to consulting team dynamics.', response:'Cemented his position as the section\'s #1 contributor across all dimensions.', tag:'Consistent excellence' },
      { student:'Eliel Rosenkranz', quote:'"The market is not ready to pay for it."', response:'Professor acknowledged the honest, grounded perspective.', tag:'Market reality check' }
    ]
  }
];

// 70 students — [name, row, col, photo, bg, gpa, actualGpa, total, quality, headline, quote, assessment, traits[], scores{c,d,f,p,co,e}, sessions[7]{t,q}]
const STUDENTS = [
  // Row 1
  {n:'Wagner De Oliveira Filho',r:1,c:1,ph:'347fe959f71db130ae86c0806fd98f41',bg:'MasterCard, Brazilian',gpa:2.7,ag:2.6,t:2,q:1,hl:'The Quiet Observer',qt:'"First-mover advantage only works if you can sustain the pace of innovation."',as:'Occasional but grounded contributions. Industry perspective from MasterCard adds commercial credibility when he speaks.',tr:['Commercial','Grounded'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0}]},
  {n:'Isabella Isotta',r:1,c:2,ph:'5b516e0a91a42da9f8598c23f0b43158',bg:'',gpa:2.8,ag:2.9,t:1,q:0,hl:'The Silent Front Row',qt:'No recorded contributions in this period.',as:'Front row presence but minimal verbal participation. May contribute through written work or small group settings.',tr:['Reserved'],sc:{c:2,d:2,f:1,p:2,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Emmanuel Franco',r:1,c:3,ph:'f23e3055202e29c9c6028260d25dc67c',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions in this period.',as:'Silent across all sessions. May engage through other channels not captured by the system.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Gabi Klein',r:1,c:4,ph:'dfa2fa2e8c345a83b377c0ff3d923073',bg:'',gpa:2.9,ag:2.8,t:2,q:1,hl:'The Emerging Voice',qt:'"The team dynamics shift completely when you introduce external deadlines."',as:'Infrequent but shows signs of analytical thinking when contributing. Growth potential evident.',tr:['Developing','Analytical'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0}]},
  {n:'Raphael Barata Pasqualetto',r:1,c:5,ph:'c9de8d4066cb33fbae3672cbd81bfec2',bg:'AI Alliance, Brazilian/Portuguese',gpa:3.3,ag:3.4,t:6,q:5,hl:'The Mathematician',qt:'"Small differences can add up to large differences — that\'s the Electoral College insight."',as:'Only student to give mathematically correct birthday probability calculation. Brings quantitative rigour that elevates discussions beyond intuition. Electoral College insight showed ability to connect abstract math to real-world systems.',tr:['Quantitative','Rigorous','Cross-domain'],sc:{c:4,d:4,f:2,p:4,co:3,e:4},ss:[{t:1,q:1},{t:1,q:1},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:1,q:1},{t:1,q:0}]},
  {n:'Javier Del Rio Torres',r:1,c:6,ph:'87a30db04ca0b363cac8b43d861fdb04',bg:'Colca Capital, Peruvian',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Investment Thinker',qt:'No substantive recorded contributions.',as:'Minimal verbal participation despite front row positioning. Investment background may show in written analysis.',tr:['Reserved','Finance'],sc:{c:2,d:2,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Katie Anderson',r:1,c:7,ph:'bc4dc248d9b73e030ea747cfef0a005e',bg:'McKinsey, British',gpa:3.0,ag:3.1,t:8,q:5,hl:'The Cross-Pollinator',qt:'"The framework applies differently when you consider the cultural context of implementation."',as:'Frequent contributor who connects ideas across domains. McKinsey training shows in structured delivery. Solid consistency without dramatic peaks.',tr:['Structured','Cross-domain','Consistent'],sc:{c:3,d:3,f:3,p:3,co:2,e:3},ss:[{t:1,q:1},{t:2,q:1},{t:1,q:1},{t:1,q:0},{t:1,q:1},{t:1,q:1},{t:1,q:0}]},
  {n:'Joon Kim',r:1,c:8,ph:'78545f473225adde1482f5b61933a6ff',bg:'',gpa:2.8,ag:2.9,t:0,q:0,hl:'The Observer',qt:'No recorded contributions in this period.',as:'Silent across all tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Vivek Singh',r:1,c:9,ph:'8b6a42fde99d740006cae895b7a44540',bg:'Amazon',gpa:2.5,ag:2.4,t:3,q:0,hl:'The Missed Opportunity',qt:'"At Amazon, we... well, it\'s about customer obsession."',as:'Notably vague about Amazon despite working there. Three contributions, zero validated. Industry experience without analytical elevation — the system catches the gap between credential and contribution.',tr:['Surface-level','Vague'],sc:{c:2,d:1,f:1,p:1,co:1,e:1},ss:[{t:1,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Xenia Postnikova',r:1,c:10,ph:'d28d01b1a2f97a0cefb27c74af553404',bg:'',gpa:3.0,ag:3.1,t:2,q:2,hl:'The Precision Striker',qt:'"The data suggests a non-linear relationship between team size and output quality."',as:'100% validation rate on limited contributions. When she speaks, it lands. Quality over quantity approach.',tr:['Precise','Selective'],sc:{c:3,d:3,f:1,p:5,co:2,e:3},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0}]},
  {n:'Francesco Danovi',r:1,c:11,ph:'3f23ff4fc743fd4045db2a0b5c01d764',bg:'',gpa:2.9,ag:3.0,t:4,q:2,hl:'The Process Designer',qt:'"What if we voted before discussion to avoid anchoring?"',as:'Competent presentations with occasional tactical insight. Suggested voting before discussion — prompted ethical analysis from professor. Shows instinct for process design.',tr:['Tactical','Process-oriented'],sc:{c:2,d:2,f:2,p:3,co:2,e:2},ss:[{t:0,q:0},{t:2,q:1},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0}]},
  {n:'Mehdi El Ayachi',r:1,c:12,ph:'',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions in this period.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Eva Sinha',r:1,c:13,ph:'b7e55515e6c736f4e8dd22bc6895212a',bg:'',gpa:3.3,ag:3.2,t:11,q:7,hl:'The Teaching Moment',qt:'"IKEA\'s enemy is individualism."',as:'Professor said her IKEA reframe was "even more poetic than what I was looking for." High hit rate contributor whose points land with enough depth that professors use them as launching pads. Quality over frequency — when she speaks, the room shifts.',tr:['High impact','Depth','Professor-validated'],sc:{c:3,d:4,f:3,p:4,co:2,e:4},ss:[{t:1,q:1},{t:2,q:1},{t:1,q:1},{t:2,q:1},{t:2,q:2},{t:2,q:1},{t:1,q:1}]},
  {n:'Guillermo Krauch',r:1,c:14,ph:'320a7866f5cfe3eec65f70889165ce78',bg:'Bain Brasil, German-Paraguayan',gpa:3.5,ag:3.6,t:8,q:7,hl:'The Economist',qt:'"If there was perfect competition, you would be basically at cost level because fair markets should work that way."',as:'Brings proper micro-economic reasoning when the rest of the room is pattern-matching. 7/8 validated. Grounded competitive advantage in perfect competition theory. Economics-first thinking from a family business dynasty and Bain consulting.',tr:['Micro-economic','Precise','Framework builder'],sc:{c:4,d:5,f:2,p:5,co:3,e:4},ss:[{t:1,q:1},{t:1,q:1},{t:1,q:1},{t:2,q:2},{t:1,q:1},{t:1,q:1},{t:1,q:0}]},
  {n:'Saurabh Bhatia',r:1,c:15,ph:'f4c5b93c94fa216c5273536162407dad',bg:'Avataar, Indian',gpa:2.9,ag:2.8,t:2,q:1,hl:'The Product Thinker',qt:'"The user experience drives adoption more than feature completeness."',as:'Product management background shows in user-centric framing. Limited contributions but quality when present.',tr:['Product-focused','User-centric'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Nichamon Damrongkitkarn',r:1,c:16,ph:'9d79db6de9e0f79d1dae2bfa7c0a0ab5',bg:'Good to Great Corp, Thai',gpa:2.8,ag:2.9,t:1,q:0,hl:'The Entrepreneur',qt:'No substantive recorded contributions.',as:'Managing Director background suggests leadership capability not yet surfaced in class participation.',tr:['Reserved','Leadership potential'],sc:{c:2,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Raphaell Henry',r:1,c:17,ph:'bb7cd233464e41af30ed2a4d3adaebbc',bg:'',gpa:2.7,ag:2.6,t:0,q:0,hl:'The Observer',qt:'No recorded contributions in this period.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Alba Wang',r:1,c:18,ph:'8d146d1725c07007126a0774acf019fa',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal participation. One contribution across the term.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Callum Bartlett',r:1,c:19,ph:'3e1cddbd8e28ba11b0e535a5e8b7e061',bg:'National Bank of Canada',gpa:2.9,ag:3.0,t:2,q:1,hl:'The Banking Voice',qt:'"Risk management in practice looks nothing like the textbook models."',as:'Banking background occasionally surfaces. Limited but not absent.',tr:['Finance','Occasional'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Karim Hafez',r:1,c:20,ph:'beb1831b732457ee9fd87ddeec51097a',bg:'',gpa:2.5,ag:2.6,t:4,q:0,hl:'The Gambler',qt:'"I\'ll bet 50 euros on the birthday problem." He lost.',as:'Bet 50 euros on the birthday problem and lost. Four contributions, zero validated. Enthusiasm without analytical backing — the system distinguishes confidence from competence.',tr:['Confident','Surface-level'],sc:{c:2,d:1,f:2,p:1,co:3,e:1},ss:[{t:1,q:0},{t:2,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Lais Victoria Ometto',r:1,c:21,ph:'33dba85310a2774e94da70187f8e9365',bg:'',gpa:2.8,ag:2.7,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Andrew Bauer',r:1,c:22,ph:'e530e98a7ee505477716bae2fe71cdef',bg:'Thuso, American',gpa:2.8,ag:2.9,t:30,q:12,hl:'The Volume Player',qt:'Appears in 16+ transcripts across lectures, study groups, and coaching sessions. High frequency, broad range.',as:'Highest raw contribution count in the section. The gap between total and validated contributions tells the story — quantity is there, the system is watching for quality to match. Present in virtually every session, willing to be first to speak.',tr:['High frequency','Broad range','Developing precision'],sc:{c:3,d:2,f:5,p:2,co:3,e:2},ss:[{t:4,q:1},{t:5,q:2},{t:4,q:2},{t:5,q:2},{t:4,q:2},{t:4,q:1},{t:4,q:2}]},
  // Row 2
  {n:'Gim Chuan Ong',r:2,c:1,ph:'ce2d4361536369c744eedc2ef1b815eb',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Madeleine Kelly',r:2,c:2,ph:'507218c771a173d6a4c9f7798145b597',bg:'',gpa:2.9,ag:2.8,t:1,q:1,hl:'The Selective Voice',qt:'"The stakeholder analysis changes completely in a non-profit context."',as:'Single validated contribution. Quality when present.',tr:['Selective'],sc:{c:2,d:2,f:1,p:5,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0}]},
  {n:'Armand Goze',r:2,c:3,ph:'e9ee42444a64569da87e944144151c41',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal verbal participation across the term.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Michelle Baaklini',r:2,c:4,ph:'db168499d2a8bfc2bc65091e75a9ad9b',bg:'Bain Middle East',gpa:2.7,ag:2.8,t:4,q:2,hl:'The Consultant',qt:'"The implementation gap is where most strategies fail."',as:'Bain consulting background evident in structured answers. Moderate participation with mixed validation. Shows potential for deeper analysis.',tr:['Consulting','Structured'],sc:{c:2,d:2,f:2,p:3,co:1,e:2},ss:[{t:1,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:1,q:0},{t:0,q:0}]},
  {n:'Chetanand Ramakrishnan',r:2,c:5,ph:'8b7ec1186f0a4cfdc6c15fdb6c372ff6',bg:'',gpa:2.8,ag:2.9,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Sandeep Lakshmipathy',r:2,c:6,ph:'39e86724ee3a3e90d8ba34ea2ed042fe',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Julien Trehet',r:2,c:7,ph:'24d94e8c4e3716e342d504cfcec261c8',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal participation across the term.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0}]},
  {n:'Raja Makhlouf',r:2,c:8,ph:'c2ea1ad8e3357b556464a3a3ee7556b8',bg:'',gpa:2.8,ag:2.7,t:3,q:1,hl:'The Surface Swimmer',qt:'"In our culture, authority is rarely questioned directly."',as:'Surface-level culture answers. Three contributions with one validated. Stays at the observation level without elevating to frameworks.',tr:['Surface-level','Cultural lens'],sc:{c:2,d:1,f:1,p:2,co:1,e:1},ss:[{t:1,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Sander Goudriaan',r:2,c:9,ph:'ae48eb595376ac1e162f9833c47cf3db',bg:'BCG, Belgian/Dutch',gpa:3.6,ag:3.5,t:3,q:3,hl:'The Analyst',qt:'"Amazon\'s scale creates data advantages that enable customer intimacy — they\'re using operational excellence to fund differentiation."',as:'Most analytically complete single answer across all transcripts. Connected Amazon\'s scale to data advantages enabling customer intimacy. 100% validation rate. BCG training shows in structured, multi-layered analysis. Quality distilled to its purest form.',tr:['Analytical','BCG-trained','Perfect precision'],sc:{c:4,d:5,f:1,p:5,co:3,e:5},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1}]},
  {n:'Justin Uffelman',r:2,c:10,ph:'b0210822ebb4066397cba8f95fde0fe1',bg:'',gpa:3.3,ag:3.2,t:6,q:5,hl:'The Efficient Operator',qt:'"The misalignment between individual incentives and team outcomes is the core failure mode."',as:'83% hit rate — remarkably efficient. Six contributions, five validated. Doesn\'t waste the room\'s time. Every contribution targeted and substantive.',tr:['Efficient','Targeted','High hit rate'],sc:{c:3,d:3,f:2,p:5,co:2,e:3},ss:[{t:1,q:1},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:1,q:1},{t:1,q:1},{t:1,q:0}]},
  {n:'Zoe Barbier-Mueller',r:2,c:11,ph:'b2d56c400eb2fe042319cfb463831bbd',bg:'Art professional',gpa:2.9,ag:2.8,t:1,q:1,hl:'The Aesthete',qt:'"The creative process in organisations mirrors artistic collaboration — tension between individual vision and collective output."',as:'Art background brings unique perspective. Single validated contribution shows creative lens.',tr:['Creative','Unique perspective'],sc:{c:3,d:2,f:1,p:5,co:2,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0}]},
  {n:'Alejandro Michel Marron',r:2,c:12,ph:'ef59e39c03f20234883cbe1c14b91d45',bg:'',gpa:2.8,ag:2.9,t:2,q:1,hl:'The Emerging Voice',qt:'"Market entry timing depends more on local regulatory environment than competitive dynamics."',as:'Shows regional market knowledge. Two contributions with emerging analytical quality.',tr:['Regional expertise','Developing'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1}]},
  {n:'Jessica Dill',r:2,c:13,ph:'48e8973e8df6eb3a647fe31284883008',bg:'Deloitte, American',gpa:3.0,ag:3.1,t:12,q:7,hl:'The Process Architect',qt:'"Focus on the data, have a process."',as:'Process-oriented, textbook correct. Deloitte consulting training shows in systematic approach. Consistent presence without dramatic peaks or valleys. Advocates for structured, data-driven approaches.',tr:['Process-oriented','Systematic','Consistent'],sc:{c:3,d:3,f:3,p:3,co:2,e:3},ss:[{t:2,q:1},{t:2,q:1},{t:1,q:1},{t:2,q:1},{t:2,q:1},{t:2,q:1},{t:1,q:1}]},
  {n:'Jozef Tanzer',r:2,c:14,ph:'dfd85821869ec25820ae5ddc6421d067',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal verbal participation.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0}]},
  {n:'Nick Colbourne',r:2,c:15,ph:'8e7258ffc2ff70ec2156c61a537f98cd',bg:'EY, Belgian/British/Canadian',gpa:3.6,ag:3.5,t:16,q:12,hl:'The Framework Challenger',qt:'"That assumes people aren\'t gonna want to pay in the middle... Surely there\'s people competing in the middle."',as:'Higher-order intellectual move — questioning the model rather than just working within it. Called BS on McKinsey\'s $8 trillion AI estimate. Identified the boundary between uncertainty types. Professors repeatedly engage substantively rather than redirecting.',tr:['Contrarian','Philosophical','Bold'],sc:{c:5,d:4,f:3,p:4,co:5,e:4},ss:[{t:2,q:1},{t:3,q:2},{t:3,q:2},{t:2,q:2},{t:2,q:2},{t:2,q:2},{t:2,q:1}]},
  {n:'Arushi Tewari',r:2,c:16,ph:'c5bbdbbd0f963a1346dac749bfa89c28',bg:'',gpa:2.8,ag:2.9,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Navya Pathak',r:2,c:17,ph:'34528a14a09dfc48e3c02b52297fe9c8',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Freddie Chambers',r:2,c:18,ph:'692b4d9d2df8d155cd94eb06afc6173c',bg:'WPP, Barbadian/British',gpa:3.2,ag:3.3,t:8,q:5,hl:'The Commercial Lens',qt:'"The brand positioning framework only works if you account for media fragmentation."',as:'Active, commercially grounded. Professor: "What you said, Freddie, makes full sense." Tactical/applied perspective rather than framework-building. WPP experience gives advertising/media lens that others lack.',tr:['Commercial','Applied','Media-savvy'],sc:{c:3,d:3,f:3,p:3,co:3,e:3},ss:[{t:2,q:1},{t:1,q:1},{t:1,q:1},{t:1,q:0},{t:1,q:1},{t:1,q:1},{t:1,q:0}]},
  // Row 3
  {n:'Omar Chemaly',r:3,c:1,ph:'9a327f93ea701856edbe552487995958',bg:'Strategy&, Lebanese',gpa:2.9,ag:2.8,t:2,q:1,hl:'The Strategy Voice',qt:'"Regional market dynamics often override global strategy frameworks."',as:'Strategy consulting background with limited participation. Shows potential in regional analysis.',tr:['Strategy','Regional'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0}]},
  {n:'Lilian Guan',r:3,c:2,ph:'c11a417bfe463c8e8f7a6049b2493e86',bg:'',gpa:2.5,ag:2.6,t:2,q:0,hl:'The Struggling Communicator',qt:'Two contributions, garbled delivery, no analytical depth.',as:'Two contributions with zero validation. Communication clarity is the barrier — ideas may be there but delivery prevents impact. The system captures what the transcript reveals.',tr:['Communication gap'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Nassib Abou Nader',r:3,c:3,ph:'b120a29fdab2c15eb2943bca1b307420',bg:'Dar Al Handasah',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Engineer',qt:'Single contribution, not validated.',as:'Engineering background from infrastructure consultancy. Minimal verbal participation.',tr:['Engineering','Reserved'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Tanya Saharya',r:3,c:4,ph:'335f49637e771c17d03786152ce6a45b',bg:'',gpa:2.8,ag:2.9,t:2,q:1,hl:'The Process Thinker',qt:'"The process design determines the outcome before any discussion begins."',as:'Process design instinct. Two contributions, one validated. Shows systematic thinking when she speaks.',tr:['Process design','Systematic'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Lars Ballhausen',r:3,c:5,ph:'f406a0050a06b393580e2eed9bf07324',bg:'',gpa:2.9,ag:3.0,t:3,q:2,hl:'The Steady Hand',qt:'"Operational consistency beats strategic brilliance in execution."',as:'Solid contributions with good hit rate. Doesn\'t overreach. Three contributions, two validated — knows his lane.',tr:['Grounded','Operational'],sc:{c:2,d:2,f:1,p:4,co:1,e:2},ss:[{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0}]},
  {n:'Jeff Neukomm',r:3,c:6,ph:'bc0ea60ae2b8cf47ed69debc81a7beeb',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal participation across the term.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Mya Ojogwu',r:3,c:7,ph:'795c5edbd0d51dfa098e21901e88fd9c',bg:'',gpa:2.8,ag:2.9,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Alan Schilis',r:3,c:8,ph:'4086e9b4321faeddd32f2902507bf4a7',bg:'',gpa:2.6,ag:2.7,t:2,q:1,hl:'The Occasional Voice',qt:'"Supply chain disruption creates both risk and opportunity simultaneously."',as:'Two contributions, one validated. Shows supply chain thinking when present.',tr:['Occasional','Supply chain'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1}]},
  {n:'Habib Baladi',r:3,c:9,ph:'d491e0f1bb7aef9b9f2f5dc7860643b2',bg:'PepsiCo',gpa:2.7,ag:2.8,t:1,q:0,hl:'The Industry Voice',qt:'Single contribution from PepsiCo operations perspective.',as:'Operations background not yet surfaced effectively in class contributions.',tr:['Operations','Reserved'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Emma Teisen',r:3,c:10,ph:'99cd25d22e569d20f627eb2e4c9cfc62',bg:'',gpa:2.8,ag:2.9,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Gonzalo Salazar',r:3,c:11,ph:'b60cf3d631ff247311937b5f15bedc89',bg:'',gpa:3.2,ag:3.3,t:5,q:4,hl:'The Late Bloomer',qt:'"The competitive advantage isn\'t in the technology — it\'s in the switching costs you create."',as:'Late bloomer with 80% hit rate. Started silent, finished strong. Five contributions concentrated in later sessions — the system captures development, not just snapshots.',tr:['Late bloomer','Improving','High hit rate'],sc:{c:3,d:3,f:2,p:4,co:2,e:3},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:1,q:1},{t:2,q:1},{t:1,q:1}]},
  {n:'Jasmine Tsai',r:3,c:12,ph:'118792e7a7001770f379fd836959301c',bg:'',gpa:2.9,ag:2.8,t:3,q:2,hl:'The Solid Recall',qt:'"The research shows a clear correlation between diversity and innovation output."',as:'Solid recall of research findings. Three contributions, two validated. Brings evidence-based perspective.',tr:['Evidence-based','Recall'],sc:{c:2,d:2,f:1,p:4,co:1,e:2},ss:[{t:1,q:1},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0}]},
  {n:'Chris Johnson',r:3,c:13,ph:'42290aaf8fafb51cc32bb19887ffd5a5',bg:'Bain, British',gpa:3.8,ag:3.7,t:24,q:17,hl:'The Reframer',qt:'"I think the point is to signal that they\'re an innovative company... and that cascades down, so I perceive Nike as being this great brand."',as:'Consistently reframes questions rather than just answering them. Operates at the level of underlying mechanisms. Professors repeatedly use his contributions as launching pads. Distinguished tacit from institutionalised knowledge at Bain. Connected Kantian ethics to classroom rule-following.',tr:['Structured','Mechanisms-level','Framework builder'],sc:{c:5,d:5,f:4,p:5,co:4,e:5},ss:[{t:3,q:2},{t:4,q:3},{t:3,q:2},{t:4,q:3},{t:3,q:2},{t:4,q:3},{t:3,q:2}]},
  {n:'Felix Fotso Kuate',r:3,c:14,ph:'c45b2fb7f39aead59d26b44fc6fb280f',bg:'',gpa:3.1,ag:3.0,t:17,q:10,hl:'The Quiet All-Rounder',qt:'"The implementation challenge is always about alignment between strategy and culture."',as:'Steady presence across the full curriculum. The kind of participant who raises the average quality of every session without dominating any single one. Cross-disciplinary range suggests genuine intellectual curiosity.',tr:['Versatile','Steady','Cross-disciplinary'],sc:{c:3,d:3,f:4,p:3,co:2,e:3},ss:[{t:2,q:1},{t:3,q:2},{t:2,q:1},{t:3,q:2},{t:2,q:1},{t:3,q:2},{t:2,q:1}]},
  {n:'Estefania Esbalie',r:3,c:15,ph:'2ff32ce9db8f9c5ee09841c82d9be9b5',bg:'',gpa:2.8,ag:2.7,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Andrew Rogozinski',r:3,c:16,ph:'ffcff4cb5023d9055129798dc2ac13b8',bg:'Five Rings Capital, American',gpa:3.2,ag:3.1,t:4,q:3,hl:'The Quick Draw',qt:'"The maturity effect — kids born earlier in the school year have a developmental advantage."',as:'Quick on the draw, correct instincts. Immediately nailed the birth month maturity effect. Finance background from Five Rings Capital shows quantitative intuition.',tr:['Quick instincts','Quantitative','Finance'],sc:{c:3,d:3,f:2,p:4,co:2,e:3},ss:[{t:1,q:1},{t:1,q:1},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0}]},
  // Row 4
  {n:'Nadir Omar',r:4,c:1,ph:'a8607eabf40faecf1da5711f051982a6',bg:'',gpa:2.7,ag:2.6,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent from the back row across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Marta Villagran Prieto',r:4,c:2,ph:'14e546ca309cef7cd2355215582b7a1a',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Eliel Rosenkranz',r:4,c:3,ph:'90d435229ba55cf0449d85c8dd3efaae',bg:'',gpa:2.8,ag:2.9,t:2,q:1,hl:'The Market Realist',qt:'"The market is not ready to pay for it."',as:'Honest, grounded market perspective. Two contributions with one direct hit — the "market is not ready" comment was acknowledged by the professor as the honest reality check the room needed.',tr:['Grounded','Market-aware'],sc:{c:2,d:2,f:1,p:3,co:3,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:1,q:1}]},
  {n:'Claire Maybank',r:4,c:4,ph:'0b241f049334a7c7bdc4f6a2a68f1445',bg:'',gpa:3.2,ag:3.1,t:1,q:1,hl:'The One-Shot Wonder',qt:'"The trust deficit in remote teams is structural, not personal — you can\'t build it through team-building exercises."',as:'One contribution. Professor referenced it three times in subsequent discussion. The system doesn\'t just count frequency — it measures ripple effect. Proof that a single well-placed insight can outweigh sessions of average participation.',tr:['High impact','Single strike','Referenced 3x'],sc:{c:4,d:4,f:1,p:5,co:3,e:5},ss:[{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Baron Sudharta',r:4,c:5,ph:'d465e96fa0ff2b567b679500f927b910',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Fatima Dashe',r:4,c:6,ph:'91096a49b4915f05e44b9ab46990fd57',bg:'BCG',gpa:3.1,ag:3.0,t:4,q:3,hl:'The BCG Analyst',qt:'"The cost structure tells a different story from the revenue narrative."',as:'BCG consulting background evident. Four contributions, three validated — strong hit rate. Brings structured analytical perspective from the back row.',tr:['BCG-trained','Analytical','Back-row contributor'],sc:{c:3,d:3,f:2,p:4,co:2,e:3},ss:[{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1},{t:1,q:1},{t:0,q:0},{t:1,q:0}]},
  {n:'Oussama Obeid',r:4,c:7,ph:'930d1121de9e34f5d74747faabd5c0d2',bg:'',gpa:2.7,ag:2.6,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Bhaskar Venkatraman',r:4,c:8,ph:'cf459e76e6e3e3020c07b32618178641',bg:'',gpa:2.8,ag:2.7,t:1,q:0,hl:'The Developing Voice',qt:'Single contribution, not validated.',as:'Minimal participation from back row.',tr:['Minimal'],sc:{c:1,d:1,f:1,p:1,co:1,e:1},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0}]},
  {n:'Sabine Rihan',r:4,c:9,ph:'af1942fedbd5f824a309dbe4b2f70a88',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]},
  {n:'Thomas Mulwa',r:4,c:10,ph:'fc568937ad77433d3442a24a8b99dd4c',bg:'',gpa:2.9,ag:2.8,t:6,q:3,hl:'The Late Bloomer',qt:'"Leadership effectiveness degrades faster than we think under sustained pressure."',as:'Late bloomer pattern — concentrated contributions in later sessions. Six total, three validated. The development trajectory is the story here, not the snapshot.',tr:['Late bloomer','Developing','Back-row riser'],sc:{c:2,d:2,f:2,p:3,co:2,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:1,q:1},{t:2,q:1},{t:2,q:1}]},
  {n:'Lina Brandao Morao Lima',r:4,c:11,ph:'dbde9ccf31f5fd52534f902d0fb74360',bg:'BASF',gpa:2.7,ag:2.8,t:2,q:1,hl:'The Corporate Voice',qt:'"Organisational inertia in large multinationals is the biggest barrier to innovation."',as:'BASF corporate background surfaces occasionally. Two contributions, one validated. Corporate lens on organisational behaviour.',tr:['Corporate','Chemical industry'],sc:{c:2,d:2,f:1,p:3,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:0},{t:0,q:0},{t:1,q:1}]},
  {n:'Vernes Rasidkadic',r:4,c:12,ph:'9cac2d3e95b1cd7be554fa55cf312b44',bg:'UniCredit, Bosnian',gpa:3.5,ag:3.4,t:2,q:2,hl:'The Industry Expert',qt:'"There\'s friction to change... inertia by the customers... a degree of trust... in COVID, there was a lot of flight to safety."',as:'Single most commercially deep answer in any transcript. Turned banking experience into generalised principle about ecosystem lock-in. Professor built 3 follow-up questions from his answer. Proof that one extraordinary contribution can define your profile.',tr:['Industry depth','Banking expertise','Ecosystem thinking'],sc:{c:4,d:5,f:1,p:5,co:3,e:5},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1},{t:0,q:0},{t:1,q:1}]},
  {n:'Yara Bou Maachar',r:4,c:13,ph:'546035e5aadd6c7db18a9faf236bbca6',bg:'McKinsey',gpa:2.9,ag:2.8,t:1,q:1,hl:'The Strategic Thinker',qt:'"The stakeholder mapping needs to account for informal influence networks."',as:'McKinsey background with single validated contribution. Shows consulting-trained thinking.',tr:['McKinsey','Strategic'],sc:{c:2,d:2,f:1,p:5,co:1,e:2},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:1,q:1}]},
  {n:'Felix Schinkovits',r:4,c:14,ph:'4fc639d361fff1b3154f1d527f64944e',bg:'',gpa:2.7,ag:2.8,t:0,q:0,hl:'The Observer',qt:'No recorded contributions.',as:'Silent across tracked sessions.',tr:['Silent'],sc:{c:1,d:1,f:0,p:0,co:1,e:0},ss:[{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0},{t:0,q:0}]}
];

const CDN = 'https://cdn.insead.edu/myinsead/profile-images/';

// ============================================================
// HELPERS
// ============================================================
function photoUrl(s) { return s.ph ? CDN + s.ph + '.jpg' : ''; }
function initials(name) { return name.split(' ').map(w => w[0]).filter(Boolean).slice(0,2).join('').toUpperCase(); }
function hitRate(s) { return s.t > 0 ? Math.round((s.q / s.t) * 100) : 0; }
function qualColor(s) {
  const hr = s.t > 0 ? s.q / s.t : 0;
  const t = Math.min(1, hr);
  return `rgb(${Math.round(100+t*112)},${Math.round(95+t*73)},${Math.round(80-t*20)})`;
}
function getStudentRank() {
  return [...STUDENTS].sort((a,b) => {
    if (b.gpa !== a.gpa) return b.gpa - a.gpa;
    if (b.q !== a.q) return b.q - a.q;
    return b.t - a.t;
  }).map((s,i) => ({ ...s, rank: i+1 }));
}
const ranked = getStudentRank();
const rankMap = {};
ranked.forEach(s => { rankMap[s.n] = s.rank; });

function sessionContribs(si) {
  let total = 0, quality = 0, active = 0;
  STUDENTS.forEach(s => {
    const ss = s.ss[si];
    total += ss.t; quality += ss.q;
    if (ss.t > 0) active++;
  });
  return { total, quality, active, silent: 70 - active };
}

// ============================================================
// TAB SWITCHING
// ============================================================
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
    if (btn.dataset.tab === 'trends') renderTrends();
  });
});

// ============================================================
// SESSION VIEW
// ============================================================
let currentSession = 0;

function renderSessionPicker() {
  const el = document.getElementById('session-picker');
  el.innerHTML = SESSIONS.map((s, i) =>
    `<div class="session-pill${i===currentSession?' active':''}" data-si="${i}">Sessions ${s.num} — ${s.title}</div>`
  ).join('');
  el.querySelectorAll('.session-pill').forEach(p => {
    p.addEventListener('click', () => { currentSession = +p.dataset.si; renderSession(); });
  });
}

function renderSession() {
  const s = SESSIONS[currentSession];
  const stats = sessionContribs(currentSession);

  // Update picker
  document.querySelectorAll('.session-pill').forEach((p,i) => {
    p.classList.toggle('active', i === currentSession);
  });

  // Header
  document.getElementById('session-header').innerHTML = `
    <div class="session-title"><span class="num">Sessions ${s.num}</span> — ${s.title}</div>
    <div class="session-meta">
      <span>${s.date}</span>
      <span><span class="hl">${stats.total}</span> contributions</span>
      <span><span class="hl">${stats.active}</span> students active</span>
      <span>${stats.silent} silent</span>
    </div>`;

  // Summary
  document.getElementById('session-summary').innerHTML = `
    <span class="case-tag">${s.case}</span>
    ${s.themes.map(t => `<span class="case-tag">${t}</span>`).join('')}
    <p style="margin-top:12px">${s.summary}</p>`;

  // Heatmap
  renderHeatmap(currentSession);

  // Leaderboard
  renderSessionLeaderboard(currentSession);

  // Key moments
  renderMoments(currentSession);
}

function renderHeatmap(si) {
  const rows = [[],[],[],[]];
  STUDENTS.forEach(s => { rows[s.r - 1].push(s); });
  rows.forEach(r => r.sort((a,b) => a.c - b.c));

  const rowLabels = ['Row 1 · Front','Row 2','Row 3','Row 4 · Back'];
  const el = document.getElementById('heatmap');
  el.innerHTML = rows.map((row, ri) => `
    <div class="heatmap-row">
      <div class="heatmap-row-label">${rowLabels[ri]}</div>
      ${row.map(s => {
        const ss = s.ss[si];
        let cls = 'silent';
        if (ss.q >= 2) cls = 'gold';
        else if (ss.q >= 1) cls = 'warm';
        else if (ss.t >= 1) cls = 'dim';
        return `<div class="heatmap-seat ${cls}" data-name="${s.n}">
          ${initials(s.n)}
          <div class="heatmap-tooltip">${s.n} · ${ss.t} contrib${ss.t!==1?'s':''} · ${ss.q} validated</div>
        </div>`;
      }).join('')}
    </div>
  `).join('');

  el.querySelectorAll('.heatmap-seat').forEach(seat => {
    seat.addEventListener('click', () => showCard(seat.dataset.name));
  });
}

function renderSessionLeaderboard(si) {
  const active = STUDENTS.filter(s => s.ss[si].t > 0)
    .map(s => ({ ...s, st: s.ss[si].t, sq: s.ss[si].q }))
    .sort((a,b) => {
      if (b.sq !== a.sq) return b.sq - a.sq;
      return b.st - a.st;
    });

  const maxT = Math.max(...active.map(s => s.st), 1);
  const el = document.getElementById('lb-rows');
  el.innerHTML = active.map((s, i) => `
    <div class="lb-row" data-name="${s.n}">
      <div class="lb-rank${i<3?' top':''}">${i+1}</div>
      <div class="lb-name">${s.n}</div>
      <div class="lb-bar-wrap">
        <div class="lb-bar-total" style="width:${(s.st/maxT)*100}%"></div>
        <div class="lb-bar-quality" style="width:${(s.sq/maxT)*100}%"></div>
      </div>
      <div class="lb-ratio"><span class="hi">${s.sq}</span>/${s.st}</div>
      <div class="lb-gpa${s.gpa>=3.5?' gold':''}">${s.gpa.toFixed(1)}</div>
    </div>
  `).join('');

  el.querySelectorAll('.lb-row').forEach(row => {
    row.addEventListener('click', () => showCard(row.dataset.name));
  });
}

function renderMoments(si) {
  const s = SESSIONS[si];
  const el = document.getElementById('moments');
  el.innerHTML = s.moments.map(m => {
    const student = STUDENTS.find(st => st.n === m.student);
    const ph = student ? photoUrl(student) : '';
    return `
    <div class="moment-card">
      <div class="moment-header">
        ${ph ? `<img class="moment-photo" src="${ph}" alt="${m.student}">` : ''}
        <div class="moment-name">${m.student}</div>
        <div class="moment-tag">${m.tag}</div>
      </div>
      <div class="moment-quote">${m.quote}</div>
      <div class="moment-response"><span class="prof">${m.response}</span></div>
    </div>`;
  }).join('');
}

// ============================================================
// SECTION OVERVIEW
// ============================================================
let sortBy = 'gpa';

function renderOverview() {
  const controls = document.getElementById('overview-controls');
  const sorts = [{k:'gpa',l:'GPA'},{k:'total',l:'Frequency'},{k:'quality',l:'Quality'},{k:'improvement',l:'Improvement'}];
  controls.innerHTML = `<span style="font-family:'JetBrains Mono',monospace;font-size:9px;color:#444;letter-spacing:0.08em;text-transform:uppercase;margin-right:8px">Sort by:</span>` +
    sorts.map(s => `<button class="sort-btn${sortBy===s.k?' active':''}" data-sort="${s.k}">${s.l}</button>`).join('');

  controls.querySelectorAll('.sort-btn').forEach(btn => {
    btn.addEventListener('click', () => { sortBy = btn.dataset.sort; renderOverview(); });
  });

  // Alert
  const silentCount = STUDENTS.filter(s => {
    let recentSilent = 0;
    for (let i = Math.max(0, SESSIONS.length-3); i < SESSIONS.length; i++) {
      if (s.ss[i].t === 0) recentSilent++;
    }
    return recentSilent >= 3;
  }).length;
  document.getElementById('alert-banner').innerHTML =
    `${silentCount} students haven't contributed in the last 3 sessions`;

  // Sort
  let sorted = [...ranked];
  if (sortBy === 'total') sorted.sort((a,b) => b.t - a.t);
  else if (sortBy === 'quality') sorted.sort((a,b) => b.q - a.q);
  else if (sortBy === 'improvement') {
    sorted.sort((a,b) => {
      const aLate = a.ss.slice(4).reduce((s,v) => s+v.t, 0);
      const aEarly = a.ss.slice(0,3).reduce((s,v) => s+v.t, 0);
      const bLate = b.ss.slice(4).reduce((s,v) => s+v.t, 0);
      const bEarly = b.ss.slice(0,3).reduce((s,v) => s+v.t, 0);
      return (bLate - bEarly) - (aLate - aEarly);
    });
  }

  // Trend arrow
  function trend(s) {
    const early = s.ss.slice(0,3).reduce((sum,v) => sum+v.t, 0);
    const late = s.ss.slice(4).reduce((sum,v) => sum+v.t, 0);
    if (late > early + 1) return '&#x25B2;';
    if (late < early - 1) return '&#x25BC;';
    return '&#x25CF;';
  }
  function trendColor(s) {
    const early = s.ss.slice(0,3).reduce((sum,v) => sum+v.t, 0);
    const late = s.ss.slice(4).reduce((sum,v) => sum+v.t, 0);
    if (late > early + 1) return '#4a9'; if (late < early - 1) return '#c55'; return '#555';
  }

  const table = document.getElementById('overview-table');
  table.innerHTML = `
    <div class="ov-row header">
      <div class="ov-col rank header-label">#</div>
      <div class="ov-col name header-label">Student</div>
      <div class="ov-col row-num header-label">Row</div>
      <div class="ov-col gpa header-label">GPA</div>
      <div class="ov-col total header-label">Total</div>
      <div class="ov-col quality header-label">Quality</div>
      <div class="ov-col trend header-label">Trend</div>
    </div>
    ${sorted.map((s, i) => `
      <div class="ov-row" data-name="${s.n}">
        <div class="ov-col rank${i<3?' top':''}">${i+1}</div>
        <div class="ov-col name">${s.n}</div>
        <div class="ov-col row-num">${s.r}</div>
        <div class="ov-col gpa${s.gpa>=3.5?' gold':''}">${s.gpa.toFixed(1)}</div>
        <div class="ov-col total">${s.t}</div>
        <div class="ov-col quality" style="color:${qualColor(s)}">${s.q}</div>
        <div class="ov-col trend" style="color:${trendColor(s)}">${trend(s)}</div>
      </div>
    `).join('')}`;

  table.querySelectorAll('.ov-row:not(.header)').forEach(row => {
    row.addEventListener('click', () => showCard(row.dataset.name));
  });
}

// ============================================================
// TRENDS
// ============================================================
function renderTrends() {
  renderBarChart('chart-contribs', SESSIONS.map((_,i) => sessionContribs(i).total), SESSIONS.map(s => s.num));
  renderLineChart('chart-speakers', SESSIONS.map((_,i) => sessionContribs(i).active), SESSIONS.map(s => s.num));
  renderMultiLine('chart-top5');
}

function renderBarChart(id, values, labels) {
  const canvas = document.getElementById(id);
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width * dpr; canvas.height = rect.height * dpr;
  canvas.style.width = rect.width + 'px'; canvas.style.height = rect.height + 'px';
  ctx.scale(dpr, dpr);
  const w = rect.width, h = rect.height;
  const maxV = Math.max(...values);
  const barW = (w - 60) / values.length * 0.6;
  const gap = (w - 60) / values.length;

  ctx.fillStyle = '#333'; ctx.font = '10px JetBrains Mono';
  values.forEach((v, i) => {
    const x = 40 + i * gap + (gap - barW) / 2;
    const barH = (v / maxV) * (h - 50);
    ctx.fillStyle = 'rgba(212,168,67,0.4)';
    ctx.fillRect(x, h - 30 - barH, barW, barH);
    ctx.fillStyle = '#666'; ctx.textAlign = 'center';
    ctx.fillText(labels[i], x + barW/2, h - 14);
    ctx.fillStyle = '#d4a843';
    ctx.fillText(v, x + barW/2, h - 34 - barH);
  });
}

function renderLineChart(id, values, labels) {
  const canvas = document.getElementById(id);
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width * dpr; canvas.height = rect.height * dpr;
  canvas.style.width = rect.width + 'px'; canvas.style.height = rect.height + 'px';
  ctx.scale(dpr, dpr);
  const w = rect.width, h = rect.height;
  const maxV = Math.max(...values);
  const gap = (w - 80) / (values.length - 1);

  ctx.strokeStyle = '#333'; ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(40, h - 30); ctx.lineTo(w - 40, h - 30); ctx.stroke();

  ctx.strokeStyle = '#d4a843'; ctx.lineWidth = 2;
  ctx.beginPath();
  values.forEach((v, i) => {
    const x = 40 + i * gap;
    const y = h - 30 - (v / maxV) * (h - 60);
    if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
  });
  ctx.stroke();

  values.forEach((v, i) => {
    const x = 40 + i * gap;
    const y = h - 30 - (v / maxV) * (h - 60);
    ctx.beginPath(); ctx.arc(x, y, 4, 0, Math.PI*2);
    ctx.fillStyle = '#d4a843'; ctx.fill();
    ctx.fillStyle = '#666'; ctx.font = '10px JetBrains Mono'; ctx.textAlign = 'center';
    ctx.fillText(labels[i], x, h - 14);
    ctx.fillStyle = '#d4a843'; ctx.fillText(v, x, y - 10);
  });
}

function renderMultiLine(id) {
  const canvas = document.getElementById(id);
  const ctx = canvas.getContext('2d');
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.parentElement.getBoundingClientRect();
  canvas.width = rect.width * dpr; canvas.height = rect.height * dpr;
  canvas.style.width = rect.width + 'px'; canvas.style.height = rect.height + 'px';
  ctx.scale(dpr, dpr);
  const w = rect.width, h = rect.height;
  const gap = (w - 80) / 6;

  const top5 = [...STUDENTS].sort((a,b) => b.t - a.t).slice(0, 5);
  const colors = ['#d4a843','#8bb4d4','#d48888','#88d4a0','#c488d4'];

  // Axis
  ctx.strokeStyle = '#333'; ctx.lineWidth = 1;
  ctx.beginPath(); ctx.moveTo(40, h - 30); ctx.lineTo(w - 40, h - 30); ctx.stroke();

  const maxCum = Math.max(...top5.map(s => s.t));

  top5.forEach((s, si) => {
    ctx.strokeStyle = colors[si]; ctx.lineWidth = 2;
    ctx.beginPath();
    let cum = 0;
    s.ss.forEach((ss, i) => {
      cum += ss.t;
      const x = 40 + i * gap;
      const y = h - 30 - (cum / maxCum) * (h - 60);
      if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
    });
    ctx.stroke();

    // Label at end
    const lastX = 40 + 6 * gap;
    const lastY = h - 30 - (s.t / maxCum) * (h - 60);
    ctx.fillStyle = colors[si]; ctx.font = '9px JetBrains Mono'; ctx.textAlign = 'left';
    ctx.fillText(s.n.split(' ')[0], lastX + 8, lastY + 3);
  });

  // X labels
  ctx.fillStyle = '#666'; ctx.font = '10px JetBrains Mono'; ctx.textAlign = 'center';
  SESSIONS.forEach((s, i) => { ctx.fillText(s.num, 40 + i * gap, h - 14); });
}

// ============================================================
// PROFILE CARD
// ============================================================
function showCard(name) {
  const s = STUDENTS.find(st => st.n === name);
  if (!s) return;
  const rank = rankMap[s.n] || '-';
  const ph = photoUrl(s);
  const dims = [
    {k:'c',l:'Curiosity'},{k:'d',l:'Depth'},{k:'f',l:'Frequency'},
    {k:'p',l:'Precision'},{k:'co',l:'Courage'},{k:'e',l:'Elevation'}
  ];
  const accuracy = s.ag ? Math.round((1 - Math.abs(s.gpa - s.ag) / s.gpa) * 100) : 0;
  const maxSS = Math.max(...s.ss.map(v => v.t), 1);

  document.getElementById('card-body').innerHTML = `
    <div class="card-photo-wrap">
      ${ph ? `<img class="card-photo" src="${ph}" alt="${s.n}">` : ''}
      <div class="card-header-text">
        <div class="card-rank">Rank <span class="rn">#${rank}</span> of 70</div>
        <div class="card-name">${s.n}</div>
        <div class="card-bg">${s.bg || 'Background not identified'}</div>
      </div>
    </div>
    <div class="card-headline">${s.hl}</div>
    <div class="card-quote">"${s.qt.replace(/^"|"$/g, '')}"</div>
    <div class="card-assessment">${s.as}</div>
    <div class="card-dims">
      <div class="card-dims-title">Assessment Dimensions</div>
      ${dims.map(d => {
        const val = s.sc[d.k];
        return `<div class="dim-row">
          <div class="dim-label">${d.l}</div>
          <div class="dim-dots">${[1,2,3,4,5].map(i => {
            let cls = '';
            if (i <= val) { cls = val >= 4 ? 'f' : val >= 2 ? 'm' : 'l'; }
            return `<div class="dim-dot ${cls}"></div>`;
          }).join('')}</div>
        </div>`;
      }).join('')}
    </div>
    <div class="card-traits">${s.tr.map(t => `<span class="card-trait">${t}</span>`).join('')}</div>
    <div class="card-sparkline">
      <div class="card-sparkline-title">Contributions by Session</div>
      <div class="sparkline-bars">
        ${s.ss.map((ss, i) => `<div class="spark-bar" style="height:${Math.max(4, (ss.t/maxSS)*36)}px;background:${ss.q>0?'rgba(212,168,67,0.5)':'rgba(100,100,100,0.3)'}">
          <span class="spark-label">${SESSIONS[i].num.split(' ')[0]}</span>
        </div>`).join('')}
      </div>
    </div>
    <div class="card-stats">
      <div class="card-stat"><div class="card-stat-val">${s.gpa.toFixed(1)}</div><div class="card-stat-label">Predicted GPA</div></div>
      <div class="card-stat"><div class="card-stat-val">${s.ag.toFixed(1)}</div><div class="card-stat-label">Actual GPA</div></div>
      <div class="card-stat"><div class="card-stat-val">${accuracy}%</div><div class="card-stat-label">Accuracy</div></div>
      <div class="card-stat"><div class="card-stat-val">${s.t}</div><div class="card-stat-label">Total</div></div>
      <div class="card-stat"><div class="card-stat-val">${hitRate(s)}%</div><div class="card-stat-label">Hit Rate</div></div>
    </div>`;

  document.getElementById('card-overlay').classList.add('visible');
}

document.getElementById('card-close').addEventListener('click', () => {
  document.getElementById('card-overlay').classList.remove('visible');
});
document.getElementById('card-overlay').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) document.getElementById('card-overlay').classList.remove('visible');
});
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') document.getElementById('card-overlay').classList.remove('visible');
});

// ============================================================
// INIT
// ============================================================
renderSessionPicker();
renderSession();
renderOverview();
</script>
</body>
</html>
